(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{291:function(e,t,a){e.exports=a(605)},296:function(e,t,a){},575:function(e,t,a){},605:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(182),i=a.n(c),l=(a(296),a(20)),o=a(21),s=a(24),u=a(22),d=a(23),m=a(608),p=a(610),h=a(606),f=a(285),E=a(607),g=a(6),b=Object(g.b)(null,function(e){return{signOut:function(){return e(function(e,t,a){(0,a.getFirebase)().auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})})})}}})(function(e){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null," ",r.a.createElement(E.a,{to:"/create"},"New Project")," "),r.a.createElement("li",null," ",r.a.createElement(E.a,{to:"/signin",onClick:e.signOut},"Log Out")),r.a.createElement("li",null," ",r.a.createElement(E.a,{to:"/",className:"btn btn-floating pink lighten-1"}," ",e.profile.initials," ")," "))}),v=function(){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null," ",r.a.createElement(E.a,{to:"/signup"},"Sign Up")," "),r.a.createElement("li",null," ",r.a.createElement(E.a,{to:"/signin"},"Login")," "))},O=Object(g.b)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}})(function(e){var t=e.auth,a=e.profile,n=t.uid?r.a.createElement(b,{profile:a}):r.a.createElement(v,null);return r.a.createElement("nav",{className:"nav-wrapper grey darken-3"},r.a.createElement("div",{className:"container"},r.a.createElement(f.a,{to:"/",className:"brand-logo left"}," Mario Plan "),n))}),j=a(16),N=a(11),y=a(52),C=a.n(y),k=function(e){var t=e.notifications;return r.a.createElement("div",{className:"row"},t&&r.a.createElement("div",{className:"col s12 m4 offset-m4 "},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"Notifications"),r.a.createElement("ul",{className:"notifications"},t&&t.map(function(e){return r.a.createElement("li",{key:e.id},e.title?r.a.createElement("div",null,r.a.createElement("span",{className:"black-text"},r.a.createElement("span",{className:"pink-text"},e.title," "),e.content," by"),r.a.createElement("span",{className:"pink-text"}," ",e.user),r.a.createElement("div",{className:"grey-text note-date"},C()(e.time.toDate()).fromNow())):r.a.createElement("div",null,r.a.createElement("span",{className:"pink-text"},e.user," "),r.a.createElement("span",null,e.content),r.a.createElement("div",{className:"note-date grey-text"},C()(e.time.toDate()).fromNow())))}))))))},S=a(39),w=function(e){var t=e.project,a=e.id,n=e.index;return r.a.createElement(S.b,{draggableId:a,index:n},function(e,n){return r.a.createElement("div",Object.assign({id:a},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),r.a.createElement("div",{className:n.isDragging?"card z-depth-0 teal lighten-5 project-summary task ":"card z-depth-0 project-summary task"},r.a.createElement("div",{className:"card-content grey-text text-darken-"},r.a.createElement(f.a,{to:"/projects/"+a},r.a.createElement("span",{className:"pink-text card-title"},t.title)),r.a.createElement("p",null,"Posted by the ",t.authorFirstName," ",t.authorLastName),r.a.createElement("p",{className:"grey-text"},C()(t.createdAt.toDate()).calendar()))))})},R=function(e){var t=e.column,a=e.tasks,n=e.index;return r.a.createElement(S.b,{draggableId:t.id,index:n},function(e){return r.a.createElement("div",Object.assign({},e.draggableProps,{ref:e.innerRef,id:t.id,className:"col s12 toDoContainer "}),r.a.createElement("div",Object.assign({className:"card z-depth-0 column-title"},e.dragHandleProps),r.a.createElement("div",{className:"card-content "},r.a.createElement("span",{className:"card-title"},t.title))),r.a.createElement(S.c,{droppableId:t.id,type:"task"},function(e,t){return r.a.createElement("div",Object.assign({className:t.isDraggingOver?"pink lighten-1 z-depth-0 draggingContainer":"rgba(0,0,128, 0.3) draggingContainer",ref:e.innerRef},e.droppableProps),a.filter(function(e){return null!=e}).map(function(e,t){return r.a.createElement(w,{project:e,key:e.id,id:e.id,index:t})}),e.placeholder)}))})},x=a(32),I=a(8),P=a(609),F=a(186),D=a.n(F);a(530),a(535);D.a.initializeApp({apiKey:"AIzaSyAzSASxHWxj2nd3Fi9-xOoNydQzkAtrV9M",authDomain:"supermariontaskmanager.firebaseapp.com",databaseURL:"https://supermariontaskmanager.firebaseio.com",projectId:"supermariontaskmanager",storageBucket:"supermariontaskmanager.appspot.com",messagingSenderId:"75996711963"});var A=D.a,T=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={projects:null,columns:null,columnOrder:null},a.onDragEnd=function(e){var t,n=e.destination,r=e.source,c=e.draggableId,i=e.type;if(n&&(n.droppableId!==r.droppableId||n.index!==r.index)){var l=a.state.columns[r.droppableId],o=a.state.columns[n.droppableId];if("column"===i){var s=Array.from(a.state.columnOrder.columnOrder);return s.splice(r.index,1),s.splice(n.index,0,c),void a.setState({columnOrder:{columnOrder:s}},function(){return a.createNewColumnsOrder(s)})}if(l!==o){var u=Array.from(l.taskIds);u.splice(r.index,1);var d=Object(N.a)({},l,{taskIds:u}),m=Array.from(o.taskIds);m.splice(n.index,0,c);var p=Object(N.a)({},o,{taskIds:m}),h=Object(N.a)({},a.state,{columns:Object(N.a)({},a.state.columns,(t={},Object(j.a)(t,d.id,d),Object(j.a)(t,p.id,p),t))});a.setState(h,function(){a.updateTasksOrder(d),a.updateTasksOrder(p)})}else{var f=Array.from(l.taskIds);f.splice(r.index,1),f.splice(n.index,0,c);var E=Object(N.a)({},l,{taskIds:f}),g=Object(N.a)({},a.state.columns,Object(j.a)({},E.id,E));a.setState({columns:g},function(){return a.updateTasksOrder(E)})}}},a.updateTasksOrder=function(e){A.firestore().collection("columns").doc(e.id).update({taskIds:e.taskIds})},a.createNewColumnsOrder=function(e){A.firestore().collection("columnOrder").doc("DOVn8mVxsU59mUOqX5pf").update({columnOrder:e})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;A.firestore().collection("projects").get().then(function(t){var a={};t.forEach(function(e){return a[e.data().id]=e.data()}),e.setState({projects:a})}),A.firestore().collection("columns").get().then(function(t){var a={};t.forEach(function(e){return a[e.data().id]=e.data()}),e.setState({columns:a})}),A.firestore().collection("columnOrder").doc("DOVn8mVxsU59mUOqX5pf").get().then(function(t){e.setState({columnOrder:t.data()})})}},{key:"render",value:function(){var e=this.props,t=e.auth,a=e.notifications,n=this.state,c=n.columns,i=n.columnOrder,l=n.projects;return t.uid?r.a.createElement(S.a,{onDragEnd:this.onDragEnd},r.a.createElement(S.c,{droppableId:"all columns",direction:"horizontal",type:"column"},function(e){return r.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),r.a.createElement("div",{className:"dashboard container column-main-area"},i&&i.columnOrder.map(function(e,t){var a=c[e],n=a.taskIds.map(function(e){return l[e]});return r.a.createElement(R,{key:a.id,column:a,tasks:n,index:t})})),e.placeholder,r.a.createElement(k,{notifications:a}))})):r.a.createElement(P.a,{to:"/signin"})}}]),t}(n.Component),U=Object(I.compose)(Object(g.b)(function(e){return{projects:e.firestore.data.projects,auth:e.firebase.auth,notifications:e.firestore.ordered.notifications,columns:e.firestore.data.columns,columnOrder:e.firestore.data.columnOrder}},null),Object(x.firestoreConnect)([{collection:"notifications",limit:3,orderBy:["time","desc"]}]))(T),_=a(120),z=function(e){var t=e.id,a=e.handleDeleteProject;return r.a.createElement(_.Modal,{actions:!1,id:"modal2"},r.a.createElement("h5",{className:"center-align"},"Are you sure you ?"),r.a.createElement("div",null,r.a.createElement("button",{className:"pink lighten-1 waves-effect waves-light btn-small left ","data-id":t,onClick:a}," Delete "),r.a.createElement("button",{className:"waves-effect waves-light btn-small right modal-close"}," Cancel ")))},L=function(e){var t=e.handleSubmit,a=e.handleEditChange,n=e.id,c=e.title,i=e.content;e.modalStatusEdit;return r.a.createElement(_.Modal,{actions:!1,id:"modal1"},r.a.createElement("form",{onSubmit:t,className:"white form-edit","data-id":n},r.a.createElement("h5",{className:"center-align"},"Please update your project"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{onChange:a,type:"text",id:"title",value:c,placeholder:"update title"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{onChange:a,id:"content",className:"materialize-textarea",value:i,placeholder:"update content"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"waves-effect waves-light btn-small modal-close"},"Update"))))},J=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:""},a.handleEditChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleDeleteProject=function(e){var t=e.target.dataset.id,n=a.props.columns&&a.props.columns.find(function(e){return e.taskIds.includes(t)});a.props.columns&&console.log("currentColumn",a.props.columns);var r=n.taskIds.filter(function(e){return e!==t});A.firestore().collection("columns").doc(n.id).update({taskIds:r}).then(function(){return a.props.deleteProject(t)}),a.props.history.push("/")},a.handleSubmit=function(e){e.preventDefault();var t=e.target.dataset.id;a.props.editProject(t,a.state)},a.updateEditField=function(){a.setState({title:a.props.project.title,content:a.props.project.content})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.project,a=e.auth,n=e.id,c=this.state,i=c.title,l=c.content;return a.uid?t?r.a.createElement("div",{className:"container section project-details "},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"title-header"},r.a.createElement("span",{className:"card-title"},t.title),r.a.createElement("div",null,r.a.createElement("i",{onClick:this.updateEditField,className:"material-icons left modal-trigger",href:"#modal1"},"edit"),r.a.createElement("i",{className:"material-icons left modal-trigger",href:"#modal2",onClick:this.modalToggleDelete},"delete_forever "))),r.a.createElement("div",null,t.content)),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text"},r.a.createElement("div",null," ",t.authorFirstName," ",t.authorLastName," "),r.a.createElement("div",null,C()(t.createdAt.toDate()).calendar()))),r.a.createElement(z,{id:n,handleDeleteProject:this.handleDeleteProject}),r.a.createElement(L,{id:n,handleEditChange:this.handleEditChange,handleSubmit:this.handleSubmit,title:i,content:l})):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"Loading project")):r.a.createElement(P.a,{to:"/signin"})}}]),t}(n.Component),G=Object(I.compose)(Object(g.b)(function(e,t){var a=t.match.params.id,n=e.firestore.data.projects,r=n?n[a]:null;return console.log(r),{project:r,auth:e.firebase.auth,id:a,columns:e.firestore.ordered.columns}},function(e){return{deleteProject:function(t){return e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("projects").doc(e).delete().then(function(){t({type:"DELETE_PROJECT",id:e})}).catch(function(e){t({type:"CREATE_PROJECT_ERROR",err:e})})}}(t))},editProject:function(t,a){return e(function(e,t){return function(a,n,r){r.getFirebase,(0,r.getFirestore)().collection("projects").doc(e).update(t).then(function(){a({type:"EDIT_PROJECT",id:e})}).catch(function(e){a({type:"CREATE_PROJECT_ERROR",err:e})})}}(t,a))}}}),Object(x.firestoreConnect)([{collection:"projects"},{collection:"columns"}]))(J),M=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(P.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign In"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Login"),r.a.createElement("div",{className:"red-text center"},t?r.a.createElement("p",null,t):null))))}}]),t}(n.Component),V=Object(g.b)(function(e){return{authError:e.auth.authError,auth:e.firebase.auth}},function(e){return{signIn:function(t){return e(function(e){return function(t,a,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then(function(){t({type:"LOGIN_SUCCESS"})}).catch(function(e){t({type:"LOGIN_ERROR",err:e})})}}(t))}}})(M),W=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:""},a.handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signUp(a.state)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authError;return t.uid?r.a.createElement(P.a,{to:"/signin"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign Up"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",id:"firstName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",id:"lastName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Sign Up")),r.a.createElement("div",{className:"center red-text"},a?r.a.createElement("p",null,a):null)))}}]),t}(n.Component),B=Object(g.b)(function(e){return{auth:e.firebase.auth,authError:e.auth.authError}},function(e){return{signUp:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,c=n.getFirestore,i=r(),l=c();i.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(t){return l.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]})}).then(function(){t({type:"SIGNUP_SUCCESS"})}).catch(function(e){t({type:"SIGNUP_ERROR",err:e})})}}(t))}}})(W),H=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:""},a.handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=Object(N.a)({},a.state,{id:Date.now().toString()});A.firestore().collection("columns").doc("column-1").update({taskIds:A.firestore.FieldValue.arrayUnion(t.id)}),a.props.createProject(t),a.props.history.push("/")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.auth.uid?r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Create New Project"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",id:"title",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Project Content"),r.a.createElement("textarea",{id:"content",className:"materialize-textarea",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Create")))):r.a.createElement(P.a,{to:"/signin"})}}]),t}(n.Component),q=Object(g.b)(function(e){return{auth:e.firebase.auth}},function(e){return{createProject:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)(),c=a().firebase.profile,i=a().firebase.auth.uid;r.collection("projects").doc(e.id).set(Object(N.a)({},e,{authorFirstName:c.firstName,authorLastName:c.lastName,authorId:i,createdAt:new Date})).then(function(){t({type:"CREATE_PROJECT",project:e})}).catch(function(e){t({type:"CREATE_PROJECT_ERROR",err:e})})}}(t))}}})(H),X=(a(575),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement(p.a,null,r.a.createElement(h.a,{exact:!0,path:"/",component:U}),r.a.createElement(h.a,{path:"/projects/:id",component:G}),r.a.createElement(h.a,{path:"/signin",component:V}),r.a.createElement(h.a,{path:"/signup",component:B}),r.a.createElement(h.a,{path:"/create",component:q}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K={authError:null},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("error"),Object(N.a)({},e,{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(N.a)({},e,{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),{state:e};case"SIGNUP_SUCCESS":return console.log("signup success"),Object(N.a)({},e,{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(N.a)({},e,{authError:t.err.message});default:return e}},$={projects:[]},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT":return console.log("created project",t.project),e;case"CREATE_PROJECT_ERROR":return console.log("created project error",t.err),e;case"DELETE_PROJECT":return console.log("deleted project",t.id),e;case"EDIT_PROJECT":return console.log("edited project",t.id),e;default:return e}},Z=a(81),ee=Object(I.combineReducers)({auth:Q,project:Y,firestore:Z.firestoreReducer,firebase:x.firebaseReducer}),te=a(289),ae=a(290),ne=Object(I.createStore)(ee,Object(ae.composeWithDevTools)(Object(I.applyMiddleware)(te.a.withExtraArgument({getFirestore:Z.getFirestore,getFirebase:x.getFirebase})),Object(Z.reduxFirestore)(A),Object(x.reactReduxFirebase)(A,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));ne.firebaseAuthIsReady.then(function(){i.a.render(r.a.createElement(g.a,{store:ne},r.a.createElement(X,null)),document.getElementById("root"))}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[291,2,1]]]);
//# sourceMappingURL=main.6763704d.chunk.js.map